<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"><head profile="http://gmpg.org/xfn/11"> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<html>
	<head>
		<title>TecendoBits - Relés e Arduino</title>
		<link rel="stylesheet" type="text/css" href="../../css/style.css">
		<link href='http://fonts.googleapis.com/css?family=Gochi+Hand' rel='stylesheet' type='text/css'>
  	</head>
  	<body>
		<a href = "../../index.html">     
     			<div id = "tecendobits">
        			<tecendobits>&larr; TecendoBits</tecendobits> 
     			</div>
		</a>
      		<a href = "eletronic.html"><div id ="texto">
			<all>Eletronic</all>
		</div>  </a>
		<a href = "../experiments.html"><div id ="foo">
			Experiments
		</div>  </a>
 		<div id = "box">
			<div id = "texto">
				<text4>
					<div class = "textTitle" > Relés no arduino + PD </div> <br>
					<div id="published"> Published September 9, 2010  </div> <br> <br>

<p> 
Patch para a comunicação entre <b>Arduino </b> e  <b>Pure Data</b>.<br>
</p>
<p>
 É necessário o Firmata para o arduino e  o pacode Pduino para o PD disponíveis em <a href="http://at.or.at/hans/pd/objects.html">http://at.or.at/hans/pd/objects.html</a>. 
</p>
 Adicionar o Firmata no diretório de bibliotecas do arduino –> copiar o pacote firmata para /usr/share/arduino/libraries (ou no diretório de bibliotecas do seu arduino), sobrescrevendo o pacote firmata antigo. <br>
Adicionar Pduino no PD -> File->Patch->New e indicar o diretório no qual está salvo o pduino.
</p>

<div  class="bigImg" style = background-image:url('../../images/pduino.png')></div> 

<p>
O objeto <b>arduino</b> em pd passa como argumento a porta escolhida para comunicação número 4 (pode ser outra, isso é descoberto pelo objeto devices). <br>
Com as mensagens <b>close</b> e <b>open</b> consigo fechar ou abrir a conexão com essa porta.<br>
</p>
<p>
A mensagem <b>PinMode</b> diz ao objeto arduino qual o modo de execução para cada pino do arduino fisicamente (input ou output), assim PinMode 13 1 envia a mensagem de que o pino 13 do arduino está em OUTPUT e em PinMode 10 0 seria que o pino 10 é INPUT.<br>
</p>
<p>
A mensagem <b>digital 13 $1</b> recebe um argumento que passa a ser o valor da variável  $1 e repassa então ao arduino o valor para esse pino, ou seja, se eu passar 0 para esta mensagem, ela irá enviar que o pino 13 tem que ser 0, e o relé estaria desligado, e se eu passar 1, ligo o relé.<br>
</p>
<p>
Para controlar o tempo desse liga e desliga (envia 0 ou envia 1), utilizei um <b>metrônomo</b> (que se está ligado (recebendo 1 pela sua esquerda, controlando isso por um toggle, que posso ativar ou desativar), envia a cada tantos milissegundos (declarado no number da sua direita) o valor 1, que é repassado para mensagem de digital e diz ao arduino que aquele pino deve ter esse valor e ligar o relé portanto.
</p>
<p>
Arquivo .pd disponível em: <a href = "../../files/dispara.pd">CODE </a>
</p>
<p>
(O código não irá funcionar sem o pacote Pduino devidamente instalado, nem sem gravar o firmata no arduino)
</p>
			</text4>
			</div>
		</div>
  	</body>
</html>
